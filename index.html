<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®æŸ” Â· æ™ºèƒ½ä½“è´¨æ£€æµ‹</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700;900&family=LXGW+WenKai+TC:wght@400;700&display=swap');
        :root {
            --palace-red: #A50020;
            --palace-red-deep: #6B0015;
            --palace-gold: #D4AF37;
            --palace-gold-bright: #FFD700;
            --palace-dark: #0D0D0D;
            --palace-cream: #FDF8F0;
            --palace-brown: #2D1810;
            --text-dark: #1A0A05;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'LXGW WenKai TC', 'Noto Serif SC', 'åæ–‡æ¥·ä½“', 'STKaiti', 'SimSun', serif;
            background: linear-gradient(135deg, var(--palace-cream) 0%, #F5EDE0 50%, #EDE4D3 100%);
            min-height: 100vh;
            position: relative;
            color: var(--text-dark);
            overflow-x: hidden;
        }
        /* èŠ‚æ°”èƒŒæ™¯è£…é¥° */
        .season-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .season-bg::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(ellipse at top right, rgba(165,0,32,0.04) 0%, transparent 40%),
                        radial-gradient(ellipse at bottom left, rgba(212,175,55,0.06) 0%, transparent 40%);
        }
        /* æ¢…èŠ±è£…é¥° */
        .plum-blossom {
            position: absolute;
            width: 30px;
            height: 30px;
            opacity: 0.15;
        }
        .plum-blossom::before {
            content: 'â€';
            font-size: 28px;
            color: var(--palace-red);
        }
        .plum-blossom:nth-child(1) { top: 8%; left: 3%; animation: sway 8s ease-in-out infinite; }
        .plum-blossom:nth-child(2) { top: 25%; right: 5%; animation: sway 10s ease-in-out infinite 1s; }
        .plum-blossom:nth-child(3) { top: 45%; left: 2%; animation: sway 9s ease-in-out infinite 2s; }
        .plum-blossom:nth-child(4) { top: 70%; right: 3%; animation: sway 11s ease-in-out infinite 0.5s; }
        .plum-blossom:nth-child(5) { bottom: 15%; left: 5%; animation: sway 8s ease-in-out infinite 1.5s; }
        /* ç«¹å¶è£…é¥° */
        .bamboo-leaf {
            position: absolute;
            font-size: 40px;
            opacity: 0.08;
            color: #2E7D32;
        }
        .bamboo-leaf:nth-child(6) { top: 15%; right: 8%; transform: rotate(30deg); }
        .bamboo-leaf:nth-child(7) { top: 55%; left: 6%; transform: rotate(-20deg); }
        .bamboo-leaf:nth-child(8) { bottom: 25%; right: 6%; transform: rotate(15deg); }
        /* ç¥¥äº‘è£…é¥° */
        .cloud {
            position: absolute;
            opacity: 0.06;
            color: var(--palace-gold);
            font-size: 50px;
            animation: cloudFloat 25s ease-in-out infinite;
        }
        .cloud:nth-child(9) { top: 5%; left: 15%; animation-delay: 0s; }
        .cloud:nth-child(10) { top: 35%; right: 12%; animation-delay: 8s; }
        .cloud:nth-child(11) { bottom: 20%; left: 20%; animation-delay: 15s; }
        /* è½èŠ±åŠ¨ç”» */
        .falling-petal {
            position: absolute;
            font-size: 16px;
            opacity: 0;
            color: #FFB7C5;
            animation: fall 12s linear infinite;
        }
        .falling-petal:nth-child(12) { left: 10%; animation-delay: 0s; }
        .falling-petal:nth-child(13) { left: 30%; animation-delay: 3s; }
        .falling-petal:nth-child(14) { left: 50%; animation-delay: 6s; }
        .falling-petal:nth-child(15) { left: 70%; animation-delay: 9s; }
        .falling-petal:nth-child(16) { left: 90%; animation-delay: 2s; }
        @keyframes sway {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(10deg) scale(1.1); }
        }
        @keyframes cloudFloat {
            0%, 100% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(30px) translateY(-10px); }
        }
        @keyframes fall {
            0% { top: -5%; opacity: 0; transform: rotate(0deg) translateX(0); }
            10% { opacity: 0.6; }
            90% { opacity: 0.4; }
            100% { top: 105%; opacity: 0; transform: rotate(360deg) translateX(50px); }
        }
        .floating-element {
            position: fixed;
            font-size: 100px;
            opacity: 0.04;
            color: var(--palace-red);
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
            font-family: 'Noto Serif SC', serif;
            font-weight: 900;
            z-index: 0;
        }
        .floating-element:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .floating-element:nth-child(2) { top: 60%; right: 5%; animation-delay: 5s; }
        .floating-element:nth-child(3) { bottom: 10%; left: 10%; animation-delay: 10s; }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }
        header {
            text-align: center;
            padding: 50px 20px;
            position: relative;
        }
        .header-line {
            width: 180px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--palace-gold-bright), var(--palace-gold), var(--palace-gold-bright), transparent);
            margin: 0 auto 25px;
            position: relative;
        }
        .header-line::before {
            content: 'â—†';
            position: absolute;
            left: 50%;
            top: -12px;
            transform: translateX(-50%);
            color: var(--palace-gold-bright);
            background: var(--palace-cream);
            padding: 0 10px;
            font-size: 1.2em;
            text-shadow: 0 0 10px rgba(212,175,55,0.5);
        }
        header h1 {
            font-family: 'Noto Serif SC', 'å®‹ä½“', 'SimSun', serif;
            font-size: 3.5em;
            font-weight: 900;
            color: var(--palace-red-deep);
            letter-spacing: 18px;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(107,0,21,0.3), 0 0 20px rgba(212,175,55,0.2);
            position: relative;
            display: inline-block;
        }
        .title-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        .ginseng-container {
            display: inline-block;
            width: 60px;
            height: 90px;
            animation: bounce 2s ease-in-out infinite;
            vertical-align: middle;
        }
        .ginseng-container.boy { animation-delay: 0s; }
        .ginseng-container.girl { animation-delay: 0.3s; }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        .ginseng-baby {
            width: 100%;
            height: 100%;
        }
        .subtitle {
            color: var(--palace-brown);
            font-size: 1.2em;
            letter-spacing: 8px;
            margin-top: 10px;
            font-weight: 600;
        }
        .seal {
            position: absolute;
            right: 30px;
            top: 30px;
            width: 85px;
            height: 85px;
            border: 4px solid var(--palace-red);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-12deg);
            opacity: 0.8;
            background: rgba(255,255,255,0.3);
            box-shadow: 0 4px 15px rgba(165,0,32,0.2);
        }
        .seal-text {
            writing-mode: vertical-rl;
            color: var(--palace-red);
            font-family: 'Noto Serif SC', 'å®‹ä½“', serif;
            font-size: 1.5em;
            letter-spacing: 6px;
            font-weight: 900;
        }
        .card {
            background: linear-gradient(145deg, #FFFFFF 0%, #FFFDF8 50%, #FDF5E8 100%);
            border-radius: 20px;
            padding: 40px;
            margin: 25px 0;
            box-shadow: 0 25px 80px rgba(165,0,32,0.12), 0 8px 30px rgba(212,175,55,0.1), 0 5px 20px rgba(0,0,0,0.08);
            border: 2px solid rgba(212,175,55,0.3);
            position: relative;
            overflow: hidden;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--palace-red), var(--palace-gold-bright), var(--palace-gold), var(--palace-gold-bright), var(--palace-red));
        }
        .corner-decoration {
            position: absolute;
            width: 80px;
            height: 80px;
            opacity: 0.25;
        }
        .corner-decoration.top-left { top: 10px; left: 10px; border-top: 3px solid var(--palace-gold); border-left: 3px solid var(--palace-gold); }
        .corner-decoration.top-right { top: 10px; right: 10px; border-top: 3px solid var(--palace-gold); border-right: 3px solid var(--palace-gold); }
        .corner-decoration.bottom-left { bottom: 10px; left: 10px; border-bottom: 3px solid var(--palace-gold); border-left: 3px solid var(--palace-gold); }
        .corner-decoration.bottom-right { bottom: 10px; right: 10px; border-bottom: 3px solid var(--palace-gold); border-right: 3px solid var(--palace-gold); }
        .step-indicator { display: flex; justify-content: center; align-items: center; margin-bottom: 40px; }
        .step {
            width: 58px; height: 58px;
            border-radius: 50%;
            background: linear-gradient(145deg, #FFFFFF, #F5F0E6);
            border: 3px solid var(--palace-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Noto Serif SC', serif;
            font-weight: 900;
            font-size: 1.3em;
            color: var(--palace-brown);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .step.active {
            background: linear-gradient(135deg, var(--palace-red), var(--palace-red-deep));
            border-color: var(--palace-gold-bright);
            color: var(--palace-gold-bright);
            transform: scale(1.2);
            box-shadow: 0 8px 30px rgba(165,0,32,0.5), 0 0 20px rgba(212,175,55,0.3);
        }
        .step.active::after {
            content: '';
            position: absolute;
            inset: -8px;
            border: 3px solid var(--palace-gold-bright);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.15); opacity: 0; }
        }
        .step.completed {
            background: linear-gradient(135deg, var(--palace-gold-bright), var(--palace-gold));
            border-color: var(--palace-gold-bright);
            color: var(--palace-red-deep);
        }
        .step-line { width: 80px; height: 4px; background: linear-gradient(90deg, #e0d5c5, #d5c8b5); position: relative; }
        .step-line.completed { background: linear-gradient(90deg, var(--palace-gold), var(--palace-gold-bright), var(--palace-gold)); }
        .section { display: none; animation: fadeSlide 0.6s ease-out; }
        .section.active { display: block; }
        @keyframes fadeSlide {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h2 {
            color: var(--palace-red-deep);
            font-family: 'Noto Serif SC', 'å®‹ä½“', serif;
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid rgba(212,175,55,0.4);
            position: relative;
            letter-spacing: 5px;
        }
        h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--palace-red), var(--palace-gold));
        }
        h3 {
            color: var(--text-dark);
            font-size: 1.2em;
            margin: 25px 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        h3::before {
            content: 'â—†';
            color: var(--palace-gold-bright);
            text-shadow: 0 0 5px rgba(212,175,55,0.5);
        }
        .form-group { margin: 20px 0; }
        label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-dark);
            font-weight: 600;
            letter-spacing: 2px;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(212,175,55,0.4);
            border-radius: 12px;
            font-size: 1em;
            font-family: inherit;
            background: linear-gradient(145deg, #FFFFFF, #FDFCF8);
            transition: all 0.3s;
            color: var(--text-dark);
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--palace-gold-bright);
            box-shadow: 0 0 0 4px rgba(212,175,55,0.2), 0 0 15px rgba(212,175,55,0.1);
        }
        .radio-group { display: flex; gap: 15px; flex-wrap: wrap; }
        .radio-option { flex: 1; min-width: 140px; }
        .radio-option input { display: none; }
        .radio-option label {
            display: block;
            padding: 18px 15px;
            border: 2px solid rgba(212,175,55,0.4);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(145deg, #FFFFFF, #FDFCF8);
            color: var(--text-dark);
            font-weight: 500;
        }
        .radio-option label:hover { border-color: var(--palace-gold-bright); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(212,175,55,0.2); }
        .radio-option input:checked + label {
            border-color: var(--palace-red);
            background: linear-gradient(135deg, var(--palace-red), var(--palace-red-deep));
            color: var(--palace-gold-bright);
            box-shadow: 0 5px 25px rgba(165,0,32,0.4);
            font-weight: 600;
        }
        .question-card {
            background: linear-gradient(135deg, #FFFFFF 0%, #FDF8F0 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid rgba(212,175,55,0.25);
            transition: all 0.3s;
        }
        .question-card:hover { transform: translateX(5px); box-shadow: 0 8px 25px rgba(165,0,32,0.08); border-color: rgba(212,175,55,0.4); }
        .question-card p { margin-bottom: 18px; font-weight: 600; color: var(--text-dark); font-size: 1.1em; }
        .score-options { display: flex; gap: 10px; }
        .score-btn {
            flex: 1;
            padding: 12px 8px;
            border: 2px solid rgba(212,175,55,0.4);
            border-radius: 10px;
            background: linear-gradient(145deg, #FFFFFF, #FDFCF8);
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 0.95em;
            color: var(--text-dark);
            font-weight: 500;
        }
        .score-btn:hover { border-color: var(--palace-gold-bright); background: linear-gradient(145deg, #FFFDF8, #FFF8E8); }
        .score-btn.selected {
            background: linear-gradient(135deg, var(--palace-gold-bright), var(--palace-gold));
            border-color: var(--palace-gold-bright);
            color: var(--palace-red-deep);
            font-weight: 700;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(212,175,55,0.4);
        }
        .btn {
            padding: 18px 50px;
            border: none;
            border-radius: 30px;
            font-size: 1.15em;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
            letter-spacing: 3px;
            font-weight: 600;
        }
        .btn-primary {
            background: linear-gradient(135deg, var(--palace-red), var(--palace-red-deep));
            color: var(--palace-gold-bright);
            box-shadow: 0 8px 30px rgba(165,0,32,0.4);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(165,0,32,0.5);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #FDF8F0, #F5EDE0);
            color: var(--text-dark);
            border: 2px solid rgba(212,175,55,0.5);
        }
        .btn-secondary:hover { background: linear-gradient(135deg, #F5EDE0, #EDE4D3); border-color: var(--palace-gold); }
        .btn-gold {
            background: linear-gradient(135deg, var(--palace-gold-bright), var(--palace-gold));
            color: var(--palace-red-deep);
            box-shadow: 0 8px 30px rgba(212,175,55,0.4);
            font-weight: 700;
        }
        .btn-group { text-align: center; margin-top: 35px; }
        .checkbox-group { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; }
        .checkbox-item {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border: 2px solid rgba(212,175,55,0.4);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(145deg, #FFFFFF, #FDFCF8);
            text-align: center;
            color: var(--text-dark);
            font-weight: 500;
        }
        .checkbox-item:hover { border-color: var(--palace-gold-bright); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(212,175,55,0.2); }
        .checkbox-item.selected {
            border-color: var(--palace-gold-bright);
            background: linear-gradient(135deg, rgba(212,175,55,0.2), rgba(212,175,55,0.08));
            box-shadow: 0 5px 20px rgba(212,175,55,0.3);
            color: var(--palace-red-deep);
            font-weight: 600;
        }
        .checkbox-item input { display: none; }
</style>
</head>
<body>
    <!-- èŠ‚æ°”èƒŒæ™¯è£…é¥° -->
    <div class="season-bg">
        <!-- æ¢…èŠ± -->
        <div class="plum-blossom"></div>
        <div class="plum-blossom"></div>
        <div class="plum-blossom"></div>
        <div class="plum-blossom"></div>
        <div class="plum-blossom"></div>
        <!-- ç«¹å¶ -->
        <div class="bamboo-leaf">ğŸ‹</div>
        <div class="bamboo-leaf">ğŸ‹</div>
        <div class="bamboo-leaf">ğŸ‹</div>
        <!-- ç¥¥äº‘ -->
        <div class="cloud">â˜</div>
        <div class="cloud">â˜</div>
        <div class="cloud">â˜</div>
        <!-- è½èŠ± -->
        <div class="falling-petal">ğŸŒ¸</div>
        <div class="falling-petal">ğŸŒ¸</div>
        <div class="falling-petal">ğŸŒ¸</div>
        <div class="falling-petal">ğŸŒ¸</div>
        <div class="falling-petal">ğŸŒ¸</div>
    </div>

    <div class="floating-element">ç¦</div>
    <div class="floating-element">å£½</div>
    <div class="floating-element">åº·</div>

    <div class="container">
        <header>
            <div class="seal"><span class="seal-text">å¾®æŸ”</span></div>
            <div class="header-line"></div>
            <div class="title-wrapper">
                <!-- ç”·å­©äººå‚å¨ƒå¨ƒ (å·¦è¾¹) -->
                <span class="ginseng-container boy"><svg class="ginseng-baby" viewBox="0 0 80 120" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="boyBodyGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#F8E71C"/>
                            <stop offset="100%" style="stop-color:#F5A623"/>
                        </linearGradient>
                        <linearGradient id="boyLeafGrad" x1="0%" y1="100%" x2="0%" y2="0%">
                            <stop offset="0%" style="stop-color:#1B5E20"/>
                            <stop offset="100%" style="stop-color:#4CAF50"/>
                        </linearGradient>
                    </defs>
                    <!-- å¶å­ -->
                    <ellipse cx="25" cy="18" rx="8" ry="4" fill="#2E7D32" transform="rotate(-45 25 18)"/>
                    <ellipse cx="55" cy="18" rx="8" ry="4" fill="#2E7D32" transform="rotate(45 55 18)"/>
                    <ellipse cx="40" cy="10" rx="5" ry="12" fill="url(#boyLeafGrad)"/>
                    <!-- çº¢æœ -->
                    <circle cx="25" cy="5" r="4" fill="#E53935"/>
                    <circle cx="40" cy="2" r="3" fill="#C62828"/>
                    <circle cx="55" cy="5" r="4" fill="#E53935"/>
                    <!-- å¤´éƒ¨ -->
                    <polygon points="40,20 50,28 48,40 40,45 32,40 30,28" fill="url(#boyBodyGrad)"/>
                    <!-- ç”·å­©çœ¼ç› - åœ†çœ¼ -->
                    <circle cx="35" cy="32" r="3" fill="#333"/>
                    <circle cx="45" cy="32" r="3" fill="#333"/>
                    <circle cx="36" cy="31" r="1" fill="#fff"/>
                    <circle cx="46" cy="31" r="1" fill="#fff"/>
                    <!-- ç”·å­©å˜´å·´ - å¾®ç¬‘ -->
                    <path d="M36,38 Q40,42 44,38" stroke="#333" stroke-width="1.5" fill="none"/>
                    <!-- èº«ä½“ -->
                    <polygon points="40,45 52,55 50,70 40,75 30,70 28,55" fill="#F5A623"/>
                    <polygon points="28,55 30,70 22,80 18,65" fill="#E8903C"/>
                    <polygon points="52,55 50,70 58,80 62,65" fill="#E8903C"/>
                    <polygon points="40,75 50,70 55,85 40,95 25,85 30,70" fill="#D0021B"/>
                    <!-- è…¿ -->
                    <polygon points="25,85 30,95 25,115 18,110 20,95" fill="#9C27B0"/>
                    <polygon points="55,85 50,95 55,115 62,110 60,95" fill="#9C27B0"/>
                    <polygon points="40,95 45,100 42,115 38,115 35,100" fill="#6A1B9A"/>
                    <!-- é«˜å…‰ -->
                    <polygon points="40,25 45,30 43,38 40,40 37,38 35,30" fill="#FFF59D" opacity="0.3"/>
                </svg></span>

                <h1>å¾®æŸ”</h1>

                <!-- å¥³å­©äººå‚å¨ƒå¨ƒ (å³è¾¹) -->
                <span class="ginseng-container girl"><svg class="ginseng-baby" viewBox="0 0 80 120" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="girlBodyGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#F8E71C"/>
                            <stop offset="100%" style="stop-color:#F5A623"/>
                        </linearGradient>
                        <linearGradient id="girlLeafGrad" x1="0%" y1="100%" x2="0%" y2="0%">
                            <stop offset="0%" style="stop-color:#1B5E20"/>
                            <stop offset="100%" style="stop-color:#4CAF50"/>
                        </linearGradient>
                    </defs>
                    <!-- å¶å­ -->
                    <ellipse cx="25" cy="18" rx="8" ry="4" fill="#2E7D32" transform="rotate(-45 25 18)"/>
                    <ellipse cx="55" cy="18" rx="8" ry="4" fill="#2E7D32" transform="rotate(45 55 18)"/>
                    <ellipse cx="40" cy="10" rx="5" ry="12" fill="url(#girlLeafGrad)"/>
                    <!-- ç²‰è‰²è´è¶ç»“è£…é¥° -->
                    <ellipse cx="28" cy="8" rx="8" ry="5" fill="#FF69B4" transform="rotate(-30 28 8)"/>
                    <ellipse cx="52" cy="8" rx="8" ry="5" fill="#FF69B4" transform="rotate(30 52 8)"/>
                    <circle cx="40" cy="8" r="4" fill="#FF1493"/>
                    <!-- çº¢æœ -->
                    <circle cx="20" cy="3" r="3" fill="#E53935"/>
                    <circle cx="60" cy="3" r="3" fill="#E53935"/>
                    <!-- å¤´éƒ¨ -->
                    <polygon points="40,20 50,28 48,40 40,45 32,40 30,28" fill="url(#girlBodyGrad)"/>
                    <!-- å¥³å­©çœ¼ç› - å¼¯å¼¯ç¬‘çœ¼ -->
                    <path d="M32,32 Q35,29 38,32" stroke="#333" stroke-width="2" fill="none"/>
                    <path d="M42,32 Q45,29 48,32" stroke="#333" stroke-width="2" fill="none"/>
                    <!-- è…®çº¢ -->
                    <ellipse cx="30" cy="36" rx="4" ry="2" fill="#FFB6C1" opacity="0.6"/>
                    <ellipse cx="50" cy="36" rx="4" ry="2" fill="#FFB6C1" opacity="0.6"/>
                    <!-- å¥³å­©å˜´å·´ - å°å˜´ -->
                    <ellipse cx="40" cy="39" rx="2" ry="1.5" fill="#E91E63"/>
                    <!-- èº«ä½“ -->
                    <polygon points="40,45 52,55 50,70 40,75 30,70 28,55" fill="#F5A623"/>
                    <polygon points="28,55 30,70 22,80 18,65" fill="#E8903C"/>
                    <polygon points="52,55 50,70 58,80 62,65" fill="#E8903C"/>
                    <polygon points="40,75 50,70 55,85 40,95 25,85 30,70" fill="#D0021B"/>
                    <!-- è…¿ -->
                    <polygon points="25,85 30,95 25,115 18,110 20,95" fill="#9C27B0"/>
                    <polygon points="55,85 50,95 55,115 62,110 60,95" fill="#9C27B0"/>
                    <polygon points="40,95 45,100 42,115 38,115 35,100" fill="#6A1B9A"/>
                    <!-- é«˜å…‰ -->
                    <polygon points="40,25 45,30 43,38 40,40 37,38 35,30" fill="#FFF59D" opacity="0.3"/>
                </svg></span>
            </div>
            <p class="subtitle">â€” æ™ºèƒ½ä½“è´¨æ£€æµ‹ä¸å…»ç”Ÿè°ƒç† â€”</p>
        </header>

        <div class="card">
            <div class="corner-decoration top-left"></div>
            <div class="corner-decoration top-right"></div>
            <div class="corner-decoration bottom-left"></div>
            <div class="corner-decoration bottom-right"></div>

            <div class="step-indicator">
                <div class="step active" id="step1">å£¹</div>
                <div class="step-line" id="line1"></div>
                <div class="step" id="step2">è´°</div>
                <div class="step-line" id="line2"></div>
                <div class="step" id="step3">å</div>
                <div class="step-line" id="line3"></div>
                <div class="step" id="step4">è‚†</div>
            </div>

            <div class="section active" id="section1">
                <h2>ğŸ“‹ åŸºæœ¬ä¿¡æ¯</h2>
                <div class="form-group">
                    <label>æ‚¨çš„å§“å</label>
                    <input type="text" id="userName" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                </div>
                <div class="form-group">
                    <label>æ‚¨çš„æ€§åˆ«</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="gender" id="male" value="male">
                            <label for="male">ğŸ‘¨ ç”·</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="gender" id="female" value="female">
                            <label for="female">ğŸ‘© å¥³</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>æ‚¨çš„å¹´é¾„</label>
                    <input type="number" id="userAge" placeholder="è¯·è¾“å…¥å¹´é¾„" min="1" max="120">
                </div>
                <div class="form-group">
                    <label>èº«é«˜ (cm)</label>
                    <input type="number" id="userHeight" placeholder="è¯·è¾“å…¥èº«é«˜" min="100" max="250">
                </div>
                <div class="form-group">
                    <label>ä½“é‡ (kg)</label>
                    <input type="number" id="userWeight" placeholder="è¯·è¾“å…¥ä½“é‡" min="30" max="200">
                </div>
                <div class="form-group">
                    <label>èŒä¸šç±»å‹</label>
                    <select id="occupation">
                        <option value="">è¯·é€‰æ‹©æ‚¨çš„èŒä¸šç±»å‹</option>
                        <option value="office">åŠå…¬å®¤ä¹…åå‹</option>
                        <option value="labor">ä½“åŠ›åŠ³åŠ¨å‹</option>
                        <option value="mixed">è„‘åŠ›+è½»ä½“åŠ›å‹</option>
                        <option value="student">å­¦ç”Ÿ</option>
                        <option value="retired">é€€ä¼‘äººå‘˜</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ä½œæ¯è§„å¾‹</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="sleep" id="sleep1" value="regular">
                            <label for="sleep1">ğŸŒ™ è§„å¾‹ä½œæ¯</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="sleep" id="sleep2" value="late">
                            <label for="sleep2">ğŸŒƒ å¶å°”ç†¬å¤œ</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="sleep" id="sleep3" value="irregular">
                            <label for="sleep3">ğŸŒ‘ ç»å¸¸ç†¬å¤œ</label>
                        </div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="nextStep(1)">ä¸‹ä¸€æ­¥ â†’</button>
                </div>
            </div>

            <div class="section" id="section2">
                <h2>ğŸ” ä½“è´¨æµ‹è¯„</h2>
                <p style="color:#666;margin-bottom:25px;font-style:italic;">è¯·æ ¹æ®æ‚¨è¿‘ä¸€å¹´çš„å®é™…æƒ…å†µï¼Œé€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹</p>
                <div id="questionContainer"></div>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="prevStep(2)">â† ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-primary" onclick="nextStep(2)">ä¸‹ä¸€æ­¥ â†’</button>
                </div>
            </div>

            <div class="section" id="section3">
                <h2>ğŸ½ï¸ é¥®é£Ÿåå¥½</h2>
                <h3>å–œå¥½å£å‘³ï¼ˆå¯å¤šé€‰ï¼‰</h3>
                <div class="checkbox-group" id="tastePrefer">
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="sour">ğŸ‹ é…¸</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="sweet">ğŸ¯ ç”œ</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="bitter">ğŸµ è‹¦</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="spicy">ğŸŒ¶ï¸ è¾£</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="salty">ğŸ§‚ å’¸</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="light">ğŸ¥— æ¸…æ·¡</div>
                </div>
                <h3>é¥®é£Ÿç¦å¿Œï¼ˆå¯å¤šé€‰ï¼‰</h3>
                <div class="checkbox-group" id="foodTaboo">
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="seafood">ğŸ¦ æµ·é²œè¿‡æ•</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="lactose">ğŸ¥› ä¹³ç³–ä¸è€</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="gluten">ğŸŒ¾ éº¸è´¨è¿‡æ•</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="nuts">ğŸ¥œ åšæœè¿‡æ•</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="vegetarian">ğŸ¥¬ ç´ é£Ÿä¸»ä¹‰</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="none">âœ… æ— ç¦å¿Œ</div>
                </div>
                <h3>å¥åº·å›°æ‰°ï¼ˆå¯å¤šé€‰ï¼‰</h3>
                <div class="checkbox-group" id="healthIssues">
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="fatigue">ğŸ˜´ æ˜“ç–²åŠ³</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="insomnia">ğŸŒ™ å¤±çœ </div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="digestion">ğŸ¤¢ æ¶ˆåŒ–ä¸è‰¯</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="cold">ğŸ¥¶ æ‰‹è„šå†°å‡‰</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="acne">ğŸ˜£ çš®è‚¤é—®é¢˜</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="weight">âš–ï¸ ä½“é‡ç®¡ç†</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="immunity">ğŸ›¡ï¸ å…ç–«åŠ›å·®</div>
                    <div class="checkbox-item" onclick="toggleCheck(this)"><input type="checkbox" value="mood">ğŸ˜” æƒ…ç»ªä½è½</div>
                </div>
                <h3>è¿åŠ¨ä¹ æƒ¯</h3>
                <div class="radio-group">
                    <div class="radio-option"><input type="radio" name="exercise" id="ex1" value="none"><label for="ex1">å‡ ä¹ä¸è¿åŠ¨</label></div>
                    <div class="radio-option"><input type="radio" name="exercise" id="ex2" value="light"><label for="ex2">å¶å°”è¿åŠ¨</label></div>
                    <div class="radio-option"><input type="radio" name="exercise" id="ex3" value="moderate"><label for="ex3">æ¯å‘¨2-3æ¬¡</label></div>
                    <div class="radio-option"><input type="radio" name="exercise" id="ex4" value="regular"><label for="ex4">è§„å¾‹è¿åŠ¨</label></div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="prevStep(3)">â† ä¸Šä¸€æ­¥</button>
                    <button class="btn btn-gold" onclick="generateResult()">ç”Ÿæˆå…»ç”Ÿæ–¹æ¡ˆ ğŸ¯</button>
                </div>
            </div>

            <div class="section" id="section4">
                <div id="resultContent"></div>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="restartTest()">é‡æ–°æµ‹è¯„</button>
                    <button class="btn btn-primary" onclick="window.print()">æ‰“å°æŠ¥å‘Š ğŸ–¨ï¸</button>
                </div>
            </div>
        </div>
    </div>
<style>
        .result-header {
            background: linear-gradient(135deg, var(--palace-red), #A50015);
            color: #fff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .result-header::before {
            content: 'â˜¯';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 80px;
            opacity: 0.1;
        }
        .result-header h3 { color: #fff; font-size: 1.8em; margin-bottom: 10px; }
        .constitution-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 25px;
            border-radius: 25px;
            margin: 8px;
            font-size: 1.1em;
            backdrop-filter: blur(5px);
        }
        .advice-card {
            background: linear-gradient(135deg, #FDFCFA 0%, #F8F5EE 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(201,162,39,0.2);
            position: relative;
        }
        .advice-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--palace-red), var(--palace-gold));
            border-radius: 4px 0 0 4px;
        }
        .advice-card h4 {
            color: var(--palace-red);
            font-size: 1.2em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .food-item {
            padding: 12px 8px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.95em;
            transition: all 0.3s;
        }
        .food-item.good {
            background: linear-gradient(135deg, rgba(76,175,80,0.15), rgba(76,175,80,0.05));
            border: 1px solid rgba(76,175,80,0.3);
            color: #2e7d32;
        }
        .food-item.bad {
            background: linear-gradient(135deg, rgba(244,67,54,0.15), rgba(244,67,54,0.05));
            border: 1px solid rgba(244,67,54,0.3);
            color: #c62828;
        }
        .advice-list { list-style: none; }
        .advice-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(201,162,39,0.15);
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        .advice-list li:last-child { border-bottom: none; }
        .advice-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--palace-gold), #E8D48B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--palace-dark);
            font-size: 14px;
            flex-shrink: 0;
        }
        .meal-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .meal-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(201,162,39,0.2);
            text-align: center;
        }
        .meal-card h5 {
            color: var(--palace-red);
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        .meal-card ul { list-style: none; text-align: left; }
        .meal-card li { padding: 6px 0; font-size: 0.95em; color: var(--palace-brown); }
        .progress-bar {
            height: 12px;
            background: #e0d5c5;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease-out;
        }
        .tag {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 4px;
        }
        .tag-feature { background: rgba(201,162,39,0.15); color: var(--palace-brown); border: 1px solid rgba(201,162,39,0.3); }
        @media (max-width: 768px) {
            .meal-grid { grid-template-columns: 1fr; }
            .score-options { flex-wrap: wrap; }
            .score-btn { min-width: 45%; }
            header h1 { font-size: 2em; letter-spacing: 6px; }
            .seal { display: none; }
        }
        @media print {
            .btn, .btn-group, header, .step-indicator, .floating-element { display: none !important; }
            .card { box-shadow: none; border: 1px solid #ddd; }
            body::before { display: none; }
        }
    </style>

    <script>
        const questions = [
            { type: 'pinghe', text: 'æ‚¨ç²¾åŠ›å……æ²›å—ï¼Ÿ', reverse: true },
            { type: 'pinghe', text: 'æ‚¨å®¹æ˜“ç–²ä¹å—ï¼Ÿ', reverse: false },
            { type: 'qixu', text: 'æ‚¨å®¹æ˜“æ°”çŸ­ï¼Œå‘¼å¸çŸ­ä¿ƒå—ï¼Ÿ' },
            { type: 'qixu', text: 'æ‚¨å®¹æ˜“å¿ƒæ…Œå—ï¼Ÿ' },
            { type: 'qixu', text: 'æ‚¨æ¯”åˆ«äººå®¹æ˜“æ„Ÿå†’å—ï¼Ÿ' },
            { type: 'yangxu', text: 'æ‚¨æ‰‹è„šå‘å‡‰å—ï¼Ÿ' },
            { type: 'yangxu', text: 'æ‚¨èƒƒè„˜éƒ¨ã€èƒŒéƒ¨æˆ–è…°è†éƒ¨æ€•å†·å—ï¼Ÿ' },
            { type: 'yangxu', text: 'æ‚¨æ¯”ä¸€èˆ¬äººè€å—ä¸äº†å¯’å†·å—ï¼Ÿ' },
            { type: 'yangxu', text: 'æ‚¨åƒå‡‰ä¸œè¥¿ä¼šæ„Ÿåˆ°ä¸èˆ’æœå—ï¼Ÿ' },
            { type: 'yinxu', text: 'æ‚¨æ„Ÿåˆ°æ‰‹è„šå¿ƒå‘çƒ­å—ï¼Ÿ' },
            { type: 'yinxu', text: 'æ‚¨çš®è‚¤æˆ–å£å”‡å¹²ç‡¥å—ï¼Ÿ' },
            { type: 'yinxu', text: 'æ‚¨å£å”‡çš„é¢œè‰²æ¯”ä¸€èˆ¬äººçº¢å—ï¼Ÿ' },
            { type: 'tanshi', text: 'æ‚¨æ„Ÿåˆ°èƒ¸é—·æˆ–è…¹éƒ¨èƒ€æ»¡å—ï¼Ÿ' },
            { type: 'tanshi', text: 'æ‚¨æ„Ÿåˆ°èº«ä½“æ²‰é‡ä¸è½»æ¾å—ï¼Ÿ' },
            { type: 'tanshi', text: 'æ‚¨è…¹éƒ¨è‚¥æ»¡æ¾è½¯å—ï¼Ÿ' },
            { type: 'tanshi', text: 'æ‚¨é¢å¤´éƒ¨ä½æ²¹è„‚åˆ†æ³Œå¤šå—ï¼Ÿ' },
            { type: 'shire', text: 'æ‚¨é¢éƒ¨æˆ–é¼»éƒ¨æœ‰æ²¹è…»æ„Ÿå—ï¼Ÿ' },
            { type: 'shire', text: 'æ‚¨æ˜“ç”Ÿç—¤ç–®æˆ–ç–®ç––å—ï¼Ÿ' },
            { type: 'shire', text: 'æ‚¨æ„Ÿåˆ°å£è‹¦æˆ–å˜´é‡Œæœ‰å¼‚å‘³å—ï¼Ÿ' },
            { type: 'xueyu', text: 'æ‚¨çš®è‚¤å¸¸åœ¨ä¸çŸ¥ä¸è§‰ä¸­å‡ºç°é’ç´«ç˜€æ–‘å—ï¼Ÿ' },
            { type: 'xueyu', text: 'æ‚¨é¢è‰²æ™¦æš—æˆ–å®¹æ˜“å‡ºç°è¤æ–‘å—ï¼Ÿ' },
            { type: 'qiyu', text: 'æ‚¨æ„Ÿåˆ°é—·é—·ä¸ä¹ã€æƒ…ç»ªä½æ²‰å—ï¼Ÿ' },
            { type: 'qiyu', text: 'æ‚¨å®¹æ˜“ç²¾ç¥ç´§å¼ ã€ç„¦è™‘ä¸å®‰å—ï¼Ÿ' },
            { type: 'qiyu', text: 'æ‚¨å¤šæ„å–„æ„Ÿã€æ„Ÿæƒ…è„†å¼±å—ï¼Ÿ' },
            { type: 'tebing', text: 'æ‚¨æ²¡æœ‰æ„Ÿå†’æ—¶ä¹Ÿä¼šæ‰“å–·åšå—ï¼Ÿ' },
            { type: 'tebing', text: 'æ‚¨å®¹æ˜“è¿‡æ•(è¯ç‰©ã€é£Ÿç‰©ã€èŠ±ç²‰ç­‰)å—ï¼Ÿ' }
        ];

        const constitutionInfo = {
            pinghe: { name: 'å¹³å’Œè´¨', emoji: 'ğŸ˜Š', color: '#4CAF50', description: 'é˜´é˜³æ°”è¡€è°ƒå’Œï¼Œä½“æ€é€‚ä¸­ï¼Œé¢è‰²çº¢æ¶¦',
                features: ['ä½“å½¢åŒ€ç§°', 'é¢è‰²æ¶¦æ³½', 'ç²¾åŠ›å……æ²›', 'ç¡çœ è‰¯å¥½'],
                goodFoods: ['äº”è°·æ‚ç²®', 'æ–°é²œè”¬æœ', 'ç˜¦è‚‰', 'é±¼ç±»', 'è±†åˆ¶å“'],
                badFoods: ['è¿‡äºæ²¹è…»', 'è¿‡äºè¾›è¾£', 'è¿‡äºå¯’å‡‰'],
                exercise: ['å„ç±»è¿åŠ¨å‡å¯', 'ä¿æŒé€‚åº¦è¿åŠ¨'],
                health: ['ä¿æŒè‰¯å¥½ä½œæ¯', 'é¥®é£Ÿå‡è¡¡', 'å¿ƒæƒ…æ„‰æ‚¦'] },
            qixu: { name: 'æ°”è™šè´¨', emoji: 'ğŸ˜”', color: '#FF9800', description: 'å…ƒæ°”ä¸è¶³ï¼Œå®¹æ˜“ç–²ä¹ã€æ°”çŸ­ã€è‡ªæ±—',
                features: ['å®¹æ˜“ç–²åŠ³', 'æ°”çŸ­æ‡’è¨€', 'å®¹æ˜“å‡ºæ±—', 'å®¹æ˜“æ„Ÿå†’'],
                goodFoods: ['é»„èŠª', 'å…šå‚', 'å±±è¯', 'å¤§æ£', 'ç‰›è‚‰', 'é¸¡è‚‰', 'é¦™è‡'],
                badFoods: ['ç”Ÿå†·é£Ÿç‰©', 'æ²¹è…»é£Ÿç‰©', 'èåœ'],
                exercise: ['å¤ªææ‹³', 'å…«æ®µé”¦', 'æ•£æ­¥'],
                health: ['é¿å…è¿‡åº¦åŠ³ç´¯', 'æ³¨æ„ä¿æš–', 'å……è¶³ç¡çœ '] },
            yangxu: { name: 'é˜³è™šè´¨', emoji: 'ğŸ¥¶', color: '#2196F3', description: 'é˜³æ°”ä¸è¶³ï¼Œç•å¯’æ€•å†·ã€æ‰‹è¶³ä¸æ¸©',
                features: ['ç•å¯’æ€•å†·', 'æ‰‹è„šå†°å‡‰', 'å–œçƒ­é¥®é£Ÿ', 'ç²¾ç¥ä¸æŒ¯'],
                goodFoods: ['ç¾Šè‚‰', 'éŸ­èœ', 'ç”Ÿå§œ', 'æ¡‚åœ†', 'æ ¸æ¡ƒ', 'è™¾'],
                badFoods: ['ç”Ÿå†·ç“œæœ', 'å†°é•‡é¥®æ–™', 'è‹¦ç“œ', 'ç»¿è±†'],
                exercise: ['æ…¢è·‘', 'å¤ªææ‹³', 'é˜³å…‰ä¸‹è¿åŠ¨'],
                health: ['æ³¨æ„ä¿æš–', 'è‰¾ç¸å…³å…ƒç©´', 'æ³¡è„š'] },
            yinxu: { name: 'é˜´è™šè´¨', emoji: 'ğŸ”¥', color: '#f44336', description: 'é˜´æ¶²äºå°‘ï¼Œå£ç‡¥å’½å¹²ã€æ‰‹è¶³å¿ƒçƒ­',
                features: ['æ‰‹è¶³å¿ƒçƒ­', 'å£å¹²å’½ç‡¥', 'å–œå†·é¥®', 'é¢è‰²æ½®çº¢'],
                goodFoods: ['é“¶è€³', 'ç™¾åˆ', 'æ¸æ', 'é¸­è‚‰', 'èœ‚èœœ', 'æ¢¨'],
                badFoods: ['è¾›è¾£é£Ÿç‰©', 'ç…ç‚¸é£Ÿç‰©', 'ç¾Šè‚‰', 'éŸ­èœ'],
                exercise: ['æ¸¸æ³³', 'å¤ªææ‹³', 'ç‘œä¼½'],
                health: ['é¿å…ç†¬å¤œ', 'ä¿æŒå¿ƒæƒ…å¹³é™', 'å¤šå–æ°´'] },
            tanshi: { name: 'ç—°æ¹¿è´¨', emoji: 'ğŸ’§', color: '#795548', description: 'ç—°æ¹¿å‡èšï¼Œå½¢ä½“è‚¥èƒ–ã€è…¹éƒ¨è‚¥æ»¡',
                features: ['å½¢ä½“è‚¥èƒ–', 'è…¹éƒ¨è‚¥æ»¡', 'å£é»è…»', 'èº«é‡ä¸çˆ½'],
                goodFoods: ['è–ç±³', 'å†¬ç“œ', 'èµ¤å°è±†', 'ç™½èåœ', 'æµ·å¸¦', 'è·å¶'],
                badFoods: ['è‚¥è‚‰', 'ç”œé£Ÿ', 'æ²¹ç‚¸é£Ÿå“', 'ç³¯ç±³'],
                exercise: ['å¿«èµ°', 'æ…¢è·‘', 'æ¸¸æ³³'],
                health: ['æ§åˆ¶ä½“é‡', 'å°‘é£Ÿå¤šé¤', 'é¿å…æ½®æ¹¿ç¯å¢ƒ'] },
            shire: { name: 'æ¹¿çƒ­è´¨', emoji: 'ğŸŒ¡ï¸', color: '#FF5722', description: 'æ¹¿çƒ­å†…è•´ï¼Œé¢å¢æ²¹å…‰ã€å£è‹¦å£å¹²',
                features: ['é¢å¢æ²¹å…‰', 'æ˜“ç”Ÿç—¤ç–®', 'å£è‹¦å£è‡­', 'å¤§ä¾¿é»æ»'],
                goodFoods: ['ç»¿è±†', 'è‹¦ç“œ', 'é»„ç“œ', 'å†¬ç“œ', 'è–ç±³', 'ç»¿èŒ¶'],
                badFoods: ['è¾›è¾£é£Ÿç‰©', 'æ²¹è…»é£Ÿç‰©', 'ç”œé£Ÿ', 'é…’ç±»'],
                exercise: ['æ¸¸æ³³', 'çˆ¬å±±', 'ä¸­é•¿è·‘'],
                health: ['ä¿æŒçš®è‚¤æ¸…æ´', 'é¿å…ç†¬å¤œ', 'æˆ’çƒŸé™é…’'] },
            xueyu: { name: 'è¡€ç˜€è´¨', emoji: 'ğŸ©¸', color: '#9C27B0', description: 'è¡€è¡Œä¸ç•…ï¼Œè‚¤è‰²æ™¦æš—ã€å®¹æ˜“å‡ºç°ç˜€æ–‘',
                features: ['è‚¤è‰²æ™¦æš—', 'æ˜“æœ‰ç˜€æ–‘', 'å£å”‡æš—æ·¡', 'æ€§æƒ…æ€¥èº'],
                goodFoods: ['å±±æ¥‚', 'é†‹', 'ç«ç‘°èŠ±', 'çº¢ç³–', 'é»‘æœ¨è€³', 'æ´‹è‘±'],
                badFoods: ['è‚¥è‚‰', 'å¥¶æ²¹', 'æ²¹ç‚¸é£Ÿå“'],
                exercise: ['å„ç§èˆè¹ˆ', 'å¤ªææ‹³', 'æ­¥è¡Œ'],
                health: ['ä¿æŒå¿ƒæƒ…èˆ’ç•…', 'é¿å…å¯’å†·åˆºæ¿€'] },
            qiyu: { name: 'æ°”éƒè´¨', emoji: 'ğŸ˜¢', color: '#607D8B', description: 'æ°”æœºéƒæ»ï¼Œç¥æƒ…æŠ‘éƒã€å¿§è™‘è„†å¼±',
                features: ['æƒ…ç»ªä½è½', 'å¤šæ„å–„æ„Ÿ', 'èƒ¸èƒèƒ€æ»¡', 'ç¡çœ ä¸ä½³'],
                goodFoods: ['ç«ç‘°èŠ±', 'ä½›æ‰‹', 'æŸ‘æ©˜', 'èåœ', 'å±±æ¥‚'],
                badFoods: ['å’–å•¡', 'æµ“èŒ¶', 'é…’ç±»'],
                exercise: ['è·‘æ­¥', 'ç™»å±±', 'æ¸¸æ³³', 'çƒç±»è¿åŠ¨'],
                health: ['å¤šä¸äººäº¤æµ', 'åŸ¹å…»å…´è¶£çˆ±å¥½', 'å¬éŸ³ä¹'] },
            tebing: { name: 'ç‰¹ç¦€è´¨', emoji: 'ğŸ¤§', color: '#E91E63', description: 'å…ˆå¤©å¤±å¸¸ï¼Œæ˜“è¿‡æ•ã€é—ä¼ æ€§ç–¾ç—…',
                features: ['å®¹æ˜“è¿‡æ•', 'é¼»å¡æµæ¶•', 'çš®è‚¤æ˜“èµ·ç–¹'],
                goodFoods: ['ç³™ç±³', 'è”¬èœ', 'æ°´æœ', 'æ¸…æ·¡é¥®é£Ÿ'],
                badFoods: ['æµ·é²œ', 'è¾›è¾£é£Ÿç‰©', 'å·²çŸ¥è¿‡æ•åŸ'],
                exercise: ['æ•£æ­¥', 'å¤ªææ‹³'],
                health: ['è¿œç¦»è¿‡æ•åŸ', 'ä¿æŒç¯å¢ƒæ¸…æ´'] }
        };

        let currentStep = 1;
        let answers = {};

        function initQuestions() {
            const container = document.getElementById('questionContainer');
            let html = '';
            questions.forEach((q, index) => {
                html += '<div class="question-card"><p>' + (index + 1) + '. ' + q.text + '</p><div class="score-options">';
                html += '<button class="score-btn" onclick="selectScore(' + index + ', 1)">1<br>æ²¡æœ‰</button>';
                html += '<button class="score-btn" onclick="selectScore(' + index + ', 2)">2<br>å¾ˆå°‘</button>';
                html += '<button class="score-btn" onclick="selectScore(' + index + ', 3)">3<br>æœ‰æ—¶</button>';
                html += '<button class="score-btn" onclick="selectScore(' + index + ', 4)">4<br>ç»å¸¸</button>';
                html += '<button class="score-btn" onclick="selectScore(' + index + ', 5)">5<br>æ€»æ˜¯</button>';
                html += '</div></div>';
            });
            container.innerHTML = html;
        }

        function selectScore(questionIndex, score) {
            answers[questionIndex] = score;
            const card = document.querySelectorAll('.question-card')[questionIndex];
            const btns = card.querySelectorAll('.score-btn');
            btns.forEach((btn, i) => btn.classList.toggle('selected', i === score - 1));
        }

        function toggleCheck(element) {
            element.classList.toggle('selected');
            element.querySelector('input').checked = !element.querySelector('input').checked;
        }

        function updateSteps(step) {
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById('step' + i);
                const lineEl = document.getElementById('line' + (i - 1));
                stepEl.classList.remove('active', 'completed');
                if (i < step) { stepEl.classList.add('completed'); if (lineEl) lineEl.classList.add('completed'); }
                else if (i === step) { stepEl.classList.add('active'); }
            }
        }

        function nextStep(current) {
            if (current === 1) {
                const name = document.getElementById('userName').value;
                const gender = document.querySelector('input[name="gender"]:checked');
                if (!name || !gender) { alert('è¯·å¡«å†™å®Œæ•´çš„åŸºæœ¬ä¿¡æ¯'); return; }
            }
            if (current === 2 && Object.keys(answers).length < questions.length * 0.7) {
                alert('è¯·è‡³å°‘å®Œæˆ70%çš„é—®é¢˜'); return;
            }
            document.getElementById('section' + current).classList.remove('active');
            document.getElementById('section' + (current + 1)).classList.add('active');
            currentStep = current + 1;
            updateSteps(currentStep);
            window.scrollTo(0, 0);
        }

        function prevStep(current) {
            document.getElementById('section' + current).classList.remove('active');
            document.getElementById('section' + (current - 1)).classList.add('active');
            currentStep = current - 1;
            updateSteps(currentStep);
        }

        function calculateConstitution() {
            const scores = { pinghe: [], qixu: [], yangxu: [], yinxu: [], tanshi: [], shire: [], xueyu: [], qiyu: [], tebing: [] };
            questions.forEach((q, index) => {
                let score = answers[index] || 3;
                if (q.reverse) score = 6 - score;
                scores[q.type].push(score);
            });
            const results = {};
            for (let type in scores) {
                const arr = scores[type];
                if (arr.length > 0) {
                    const sum = arr.reduce((a, b) => a + b, 0);
                    results[type] = ((sum - arr.length) / (arr.length * 4)) * 100;
                }
            }
            return results;
        }

        function generateResult() {
            const name = document.getElementById('userName').value;
            const height = parseFloat(document.getElementById('userHeight').value) / 100;
            const weight = parseFloat(document.getElementById('userWeight').value);
            const bmi = (weight / (height * height)).toFixed(1);
            let bmiStatus = bmi < 18.5 ? 'åç˜¦' : bmi < 24 ? 'æ­£å¸¸' : bmi < 28 ? 'åèƒ–' : 'è‚¥èƒ–';

            const constitutionScores = calculateConstitution();
            const sorted = Object.entries(constitutionScores).sort((a, b) => b[1] - a[1]);
            let mainTypes = sorted.filter(([type, score]) => score >= 35).slice(0, 3);
            if (mainTypes.length === 0) mainTypes.push(['pinghe', 60]);

            let html = '<div class="result-header"><h3>ğŸ¥ ' + name + ' çš„å…»ç”ŸæŠ¥å‘Š</h3>';
            html += '<p style="margin:10px 0;">BMIæŒ‡æ•°ï¼š<strong>' + bmi + '</strong> | ä½“é‡çŠ¶æ€ï¼š' + bmiStatus + '</p>';
            html += '<p style="margin-top:15px;">ä¸»è¦ä½“è´¨ç±»å‹ï¼š</p>';
            mainTypes.forEach(([type, score]) => {
                const info = constitutionInfo[type];
                html += '<span class="constitution-badge">' + info.emoji + ' ' + info.name + ' (' + score.toFixed(0) + '%)</span>';
            });
            html += '</div>';

            mainTypes.forEach(([type, score]) => {
                const info = constitutionInfo[type];
                html += '<div class="advice-card"><h4>' + info.emoji + ' ' + info.name + 'ç‰¹å¾åˆ†æ</h4>';
                html += '<p style="color:#666;margin-bottom:15px;">' + info.description + '</p>';
                html += '<div class="progress-bar"><div class="progress-fill" style="width:' + score + '%;background:' + info.color + '"></div></div>';
                html += '<p style="margin-top:15px;"><strong>ä¸»è¦è¡¨ç°ï¼š</strong></p><div style="margin-top:8px;">';
                info.features.forEach(f => { html += '<span class="tag tag-feature">' + f + '</span>'; });
                html += '</div></div>';
            });

            let goodFoods = new Set(), badFoods = new Set();
            mainTypes.forEach(([type]) => {
                constitutionInfo[type].goodFoods.forEach(f => goodFoods.add(f));
                constitutionInfo[type].badFoods.forEach(f => badFoods.add(f));
            });

            html += '<div class="advice-card"><h4>ğŸ½ï¸ é¥®é£Ÿè°ƒç†æ–¹æ¡ˆ</h4>';
            html += '<p><strong>âœ… æ¨èé£Ÿç‰©ï¼š</strong></p><div class="food-grid">';
            [...goodFoods].slice(0, 10).forEach(f => { html += '<div class="food-item good">' + f + '</div>'; });
            html += '</div><p style="margin-top:20px;"><strong>âŒ å°‘åƒæˆ–é¿å…ï¼š</strong></p><div class="food-grid">';
            [...badFoods].slice(0, 8).forEach(f => { html += '<div class="food-item bad">' + f + '</div>'; });
            html += '</div></div>';

            const mainType = mainTypes[0][0];
            const weekMeals = {
                yangxu: [
                    {day:'å‘¨ä¸€', b:'å°ç±³ç²¥+ç…®é¸¡è›‹+è¥¿å…°èŠ±', l:'ç¾Šè‚‰èåœæ±¤+éŸ­èœè™¾ä»+ç³™ç±³é¥­', d:'å±±è¯æ’éª¨æ±¤+æ¸…ç‚’è èœ+æ‚ç²®é¦’å¤´'},
                    {day:'å‘¨äºŒ', b:'çº¢æ£æ¡‚åœ†ç²¥+è’¸è›‹+ç”Ÿèœ', l:'é»„èŠªé¸¡æ±¤+é¦™è‡é’èœ+ç´«ç±³é¥­', d:'æ ¸æ¡ƒèŠéº»ç³Š+å‡‰æ‹Œé»„ç“œ+å…¨éº¦é¢åŒ…'},
                    {day:'å‘¨ä¸‰', b:'å§œä¸è›‹ç‚’é¥­+ç•ªèŒ„æ±¤', l:'ç‰›è‚‰ç‚–åœŸè±†+è’œè“‰æ²¹éº¦èœ+ç±³é¥­', d:'å°ç±³å—ç“œç²¥+æ¸…ç‚’è±†è‹—+èŠ±å·'},
                    {day:'å‘¨å››', b:'ç‡•éº¦ç²¥+è·åŒ…è›‹+ç‚’é’èœ', l:'ç¾Šè‚‰æ±¤é¢+å‡‰æ‹Œæœ¨è€³', d:'çº¢æ£é“¶è€³ç¾¹+è’¸èŒ„å­+ç‰ç±³'},
                    {day:'å‘¨äº”', b:'é»‘ç±³ç²¥+èŒ¶å¶è›‹+è¥¿è“èŠ±', l:'éŸ­èœç‚’è›‹+ç•ªèŒ„ç‰›è…©+ç±³é¥­', d:'å±±è¯è²å­ç²¥+ç™½ç¼èœå¿ƒ+çº¢è–¯'},
                    {day:'å‘¨å…­', b:'æ¡‚åœ†çº¢æ£èŒ¶+å…¨éº¦ä¸‰æ˜æ²»', l:'å½“å½’ç”Ÿå§œç¾Šè‚‰æ±¤+æ¸…ç‚’æ—¶è”¬+é¦’å¤´', d:'å°ç±³ç²¥+è’¸å—ç“œ+å‡‰æ‹Œè±†è…'},
                    {day:'å‘¨æ—¥', b:'æ ¸æ¡ƒèŠéº»ç³Š+ç…è›‹+æ²™æ‹‰', l:'æ¿æ —é¸¡æ±¤+è’œè“‰è¥¿å…°èŠ±+æ‚ç²®é¥­', d:'çº¢ç³–å§œèŒ¶+æ¸…è’¸é±¼+è”¬èœç²¥'}
                ],
                yinxu: [
                    {day:'å‘¨ä¸€', b:'é“¶è€³è²å­ç¾¹+è’¸è›‹+é»„ç“œ', l:'é¸­è‚‰å†¬ç“œæ±¤+æ¸…ç‚’èŠ¹èœ+ç±³é¥­', d:'ç™¾åˆç²¥+å‡‰æ‹Œæµ·å¸¦+å…¨éº¦é¦’å¤´'},
                    {day:'å‘¨äºŒ', b:'ç‡•éº¦ç‰›å¥¶+æ°´ç…®è›‹+ç”Ÿèœ', l:'ç•ªèŒ„é±¼ç‰‡æ±¤+è’œè“‰è èœ+ç³™ç±³é¥­', d:'ç»¿è±†æ±¤+ç™½ç¼è™¾+ç‰ç±³'},
                    {day:'å‘¨ä¸‰', b:'å°ç±³ç»¿è±†ç²¥+è’¸è›‹+è¥¿è“èŠ±', l:'å†¬ç“œæ’éª¨æ±¤+æ¸…ç‚’è‹¦ç“œ+ç±³é¥­', d:'é›ªæ¢¨é“¶è€³æ±¤+æ¸…è’¸è±†è…+æ‚ç²®'},
                    {day:'å‘¨å››', b:'é»‘èŠéº»ç³Š+é¸¡è›‹+å‡‰æ‹Œèœ', l:'æµ·å¸¦è±†è…æ±¤+ç™½ç¼èœå¿ƒ+ç´«ç±³é¥­', d:'è²å­ç™¾åˆç²¥+æ¸…è’¸é²ˆé±¼+çº¢è–¯'},
                    {day:'å‘¨äº”', b:'ç‡•éº¦ç²¥+è·åŒ…è›‹+ç•ªèŒ„', l:'é¸­è¡€ç²‰ä¸æ±¤+æ¸…ç‚’æ²¹éº¦èœ+ç±³é¥­', d:'æ¸æèŠèŠ±èŒ¶+å‡‰æ‹Œæœ¨è€³+é¦’å¤´'},
                    {day:'å‘¨å…­', b:'ç‰›å¥¶éº¦ç‰‡+ç…®è›‹+æ²™æ‹‰', l:'å†¬ç“œè™¾ä»æ±¤+è’œè“‰ç©ºå¿ƒèœ+æ‚ç²®é¥­', d:'ç»¿è±†ç™¾åˆç²¥+æ¸…è’¸è›‹+èŠ±å·'},
                    {day:'å‘¨æ—¥', b:'é“¶è€³é›ªæ¢¨ç¾¹+è’¸è›‹+é»„ç“œ', l:'ç•ªèŒ„è±†è…æ±¤+æ¸…ç‚’èŠ¦ç¬‹+ç±³é¥­', d:'è²è—•æ’éª¨æ±¤+å‡‰æ‹Œè±†èŠ½+ç‰ç±³'}
                ],
                qixu: [
                    {day:'å‘¨ä¸€', b:'é»„èŠªå…šå‚ç²¥+é¸¡è›‹+é’èœ', l:'å±±è¯æ’éª¨æ±¤+é¦™è‡é’èœ+ç±³é¥­', d:'å°ç±³ç²¥+è’¸å—ç“œ+è’¸è›‹'},
                    {day:'å‘¨äºŒ', b:'çº¢æ£å°ç±³ç²¥+ç…®è›‹+è¥¿è“èŠ±', l:'é¸¡æ±¤é¢+æ¸…ç‚’æ—¶è”¬', d:'å±±è¯è²å­ç¾¹+å‡‰æ‹Œè èœ+æ‚ç²®é¦’å¤´'},
                    {day:'å‘¨ä¸‰', b:'ç‡•éº¦ç‰›å¥¶+è·åŒ…è›‹+ç•ªèŒ„', l:'ç‰›è‚‰èåœæ±¤+è’œè“‰æ²¹éº¦èœ+ç³™ç±³é¥­', d:'å—ç“œå°ç±³ç²¥+æ¸…è’¸é±¼+èŠ±å·'},
                    {day:'å‘¨å››', b:'å…«å®ç²¥+è’¸è›‹+ç”Ÿèœ', l:'å…šå‚é»„èŠªé¸¡æ±¤+æ¸…ç‚’è±†è‹—+ç±³é¥­', d:'çº¢æ£é“¶è€³ç¾¹+è’¸èŒ„å­+ç‰ç±³'},
                    {day:'å‘¨äº”', b:'é»‘ç±³ç²¥+èŒ¶å¶è›‹+å‡‰æ‹Œèœ', l:'å±±è¯ç‚–é¸¡+ç™½ç¼èœå¿ƒ+ç´«ç±³é¥­', d:'æ¡‚åœ†çº¢æ£èŒ¶+æ¸…è’¸è±†è…+çº¢è–¯'},
                    {day:'å‘¨å…­', b:'å°ç±³å—ç“œç²¥+ç…è›‹+æ²™æ‹‰', l:'é»„èŠªç‰›è‚‰æ±¤+é¦™è‡é’èœ+æ‚ç²®é¥­', d:'è²å­ç™¾åˆç²¥+å‡‰æ‹Œé»„ç“œ+é¦’å¤´'},
                    {day:'å‘¨æ—¥', b:'æ ¸æ¡ƒèŠéº»ç³Š+è’¸è›‹+è¥¿è“èŠ±', l:'äººå‚é¸¡æ±¤+è’œè“‰è¥¿å…°èŠ±+ç±³é¥­', d:'å±±è¯æ’éª¨ç²¥+æ¸…ç‚’èŠ¦ç¬‹+èŠ±å·'}
                ],
                tanshi: [
                    {day:'å‘¨ä¸€', b:'è–ç±³çº¢è±†ç²¥+è’¸è›‹+é»„ç“œ', l:'å†¬ç“œæµ·å¸¦æ±¤+æ¸…è’¸é±¼+ç³™ç±³é¥­', d:'è·å¶èŒ¶+å‡‰æ‹Œæœ¨è€³+ç‰ç±³'},
                    {day:'å‘¨äºŒ', b:'ç‡•éº¦ç²¥+æ°´ç…®è›‹+ç”Ÿèœ', l:'å†¬ç“œè™¾ä»æ±¤+è’œè“‰è èœ+ç±³é¥­', d:'è–ç±³ç»¿è±†æ±¤+æ¸…è’¸è±†è…+çº¢è–¯'},
                    {day:'å‘¨ä¸‰', b:'å°ç±³ç²¥+è·åŒ…è›‹+è¥¿è“èŠ±', l:'æµ·å¸¦è±†è…æ±¤+æ¸…ç‚’èŠ¹èœ+æ‚ç²®é¥­', d:'é™ˆçš®æ™®æ´±èŒ¶+ç™½ç¼è™¾+èŠ±å·'},
                    {day:'å‘¨å››', b:'çº¢è±†è–ç±³ç³Š+è’¸è›‹+ç•ªèŒ„', l:'èåœæ’éª¨æ±¤+æ¸…ç‚’è‹¦ç“œ+ç³™ç±³é¥­', d:'å±±æ¥‚è·å¶èŒ¶+å‡‰æ‹Œæµ·å¸¦+é¦’å¤´'},
                    {day:'å‘¨äº”', b:'ç‡•éº¦ç‰›å¥¶+ç…®è›‹+å‡‰æ‹Œèœ', l:'å†¬ç“œé¸­è‚‰æ±¤+è’œè“‰æ²¹éº¦èœ+ç´«ç±³é¥­', d:'è–ç±³ç²¥+æ¸…è’¸é²ˆé±¼+ç‰ç±³'},
                    {day:'å‘¨å…­', b:'èŒ¯è‹“è–ç±³ç²¥+èŒ¶å¶è›‹+æ²™æ‹‰', l:'æµ·å¸¦ç»¿è±†æ±¤+ç™½ç¼èœå¿ƒ+æ‚ç²®é¥­', d:'è·å¶å†³æ˜èŒ¶+å‡‰æ‹Œè±†èŠ½+çº¢è–¯'},
                    {day:'å‘¨æ—¥', b:'çº¢è±†å°ç±³ç²¥+è’¸è›‹+é»„ç“œ', l:'å†¬ç“œè–ç±³æ±¤+æ¸…ç‚’æ—¶è”¬+ç±³é¥­', d:'é™ˆçš®å±±æ¥‚èŒ¶+æ¸…è’¸è±†è…+èŠ±å·'}
                ],
                pinghe: [
                    {day:'å‘¨ä¸€', b:'æ‚ç²®ç²¥+ç…®è›‹+è¥¿è“èŠ±', l:'ç•ªèŒ„ç‰›è‚‰æ±¤+æ¸…ç‚’æ—¶è”¬+ç±³é¥­', d:'è”¬èœæ±¤+æ¸…è’¸é±¼+æ‚ç²®é¦’å¤´'},
                    {day:'å‘¨äºŒ', b:'ç‡•éº¦ç‰›å¥¶+è·åŒ…è›‹+ç”Ÿèœ', l:'æ’éª¨è²è—•æ±¤+è’œè“‰è èœ+ç³™ç±³é¥­', d:'å°ç±³ç²¥+å‡‰æ‹Œè±†è…+ç‰ç±³'},
                    {day:'å‘¨ä¸‰', b:'å°ç±³ç²¥+è’¸è›‹+ç•ªèŒ„', l:'é¸¡æ±¤é¢+æ¸…ç‚’æ²¹éº¦èœ', d:'é“¶è€³æ±¤+ç™½ç¼è™¾+èŠ±å·'},
                    {day:'å‘¨å››', b:'é»‘ç±³ç²¥+èŒ¶å¶è›‹+å‡‰æ‹Œèœ', l:'å†¬ç“œæ’éª¨æ±¤+é¦™è‡é’èœ+ç´«ç±³é¥­', d:'å—ç“œç²¥+æ¸…è’¸è›‹+çº¢è–¯'},
                    {day:'å‘¨äº”', b:'ç‡•éº¦ç²¥+ç…è›‹+é»„ç“œ', l:'ç•ªèŒ„é±¼ç‰‡æ±¤+è’œè“‰è¥¿å…°èŠ±+ç±³é¥­', d:'çº¢æ£é“¶è€³ç¾¹+å‡‰æ‹Œæœ¨è€³+é¦’å¤´'},
                    {day:'å‘¨å…­', b:'æ ¸æ¡ƒèŠéº»ç³Š+è’¸è›‹+æ²™æ‹‰', l:'å±±è¯æ’éª¨æ±¤+æ¸…ç‚’èŠ¦ç¬‹+æ‚ç²®é¥­', d:'ç»¿è±†æ±¤+æ¸…è’¸é²ˆé±¼+ç‰ç±³'},
                    {day:'å‘¨æ—¥', b:'å…«å®ç²¥+è·åŒ…è›‹+è¥¿è“èŠ±', l:'ç‰›è‚‰èåœæ±¤+ç™½ç¼èœå¿ƒ+ç±³é¥­', d:'è²å­ç™¾åˆç²¥+å‡‰æ‹Œè±†èŠ½+èŠ±å·'}
                ]
            };
            const teaRecommend = {
                yangxu: [{name:'æ¡‚åœ†çº¢æ£èŒ¶', desc:'æ¸©è¡¥æ°”è¡€ï¼Œé©±å¯’æš–èº«'}, {name:'å§œæ£èŒ¶', desc:'æ¸©ä¸­æ•£å¯’ï¼Œè¡¥ç›Šè„¾èƒƒ'}, {name:'é»„èŠªæ¸æèŒ¶', desc:'è¡¥æ°”å›ºè¡¨ï¼Œå¢å¼ºä½“è´¨'}],
                yinxu: [{name:'æ¸æèŠèŠ±èŒ¶', desc:'æ¸…è‚æ˜ç›®ï¼Œæ»‹é˜´é™ç«'}, {name:'ç™¾åˆé“¶è€³èŒ¶', desc:'æ¶¦è‚ºå…»é˜´ï¼Œæ¸…å¿ƒå®‰ç¥'}, {name:'éº¦å†¬çŸ³æ–›èŒ¶', desc:'å…»é˜´ç”Ÿæ´¥ï¼Œæ¶¦ç‡¥æ¸…çƒ­'}],
                qixu: [{name:'é»„èŠªå…šå‚èŒ¶', desc:'è¡¥ä¸­ç›Šæ°”ï¼Œå¥è„¾å…»èƒƒ'}, {name:'äººå‚çº¢æ£èŒ¶', desc:'å¤§è¡¥å…ƒæ°”ï¼Œå®‰ç¥ç›Šæ™º'}, {name:'å±±è¯èŒ¯è‹“èŒ¶', desc:'å¥è„¾ç›Šæ°”ï¼Œç¥›æ¹¿åŒ–ç—°'}],
                tanshi: [{name:'è·å¶å†³æ˜èŒ¶', desc:'æ¸…çƒ­åˆ©æ¹¿ï¼Œé™è„‚å‡è‚¥'}, {name:'é™ˆçš®æ™®æ´±èŒ¶', desc:'ç†æ°”å¥è„¾ï¼Œæ¶ˆé£ŸåŒ–ç—°'}, {name:'è–ç±³èŒ¯è‹“èŒ¶', desc:'å¥è„¾ç¥›æ¹¿ï¼Œåˆ©æ°´æ¶ˆè‚¿'}],
                pinghe: [{name:'æ¸æèŠèŠ±èŒ¶', desc:'æ¸…è‚æ˜ç›®ï¼Œè°ƒç†å¹³è¡¡'}, {name:'ç«ç‘°èŠ±èŒ¶', desc:'ç–è‚ç†æ°”ï¼Œç¾å®¹å…»é¢œ'}, {name:'ç»¿èŒ¶', desc:'æ¸…çƒ­è§£æ¯’ï¼Œæç¥é†’è„‘'}]
            };
            const weekMeal = weekMeals[mainType] || weekMeals.pinghe;
            const teas = teaRecommend[mainType] || teaRecommend.pinghe;

            html += '<div class="advice-card"><h4>ğŸ“… ä¸ƒæ—¥é£Ÿè°± (211æ³•åˆ™ï¼š2ä»½è”¬èœ+1ä»½è›‹ç™½+1ä»½ä¸»é£Ÿ)</h4>';
            html += '<div style="overflow-x:auto;"><table style="width:100%;border-collapse:collapse;font-size:0.9em;">';
            html += '<tr style="background:linear-gradient(135deg,var(--palace-red),var(--palace-red-deep));color:#fff;"><th style="padding:12px;border:1px solid var(--palace-gold);">æ—¥æœŸ</th><th style="padding:12px;border:1px solid var(--palace-gold);">ğŸŒ… æ—©é¤</th><th style="padding:12px;border:1px solid var(--palace-gold);">â˜€ï¸ åˆé¤</th><th style="padding:12px;border:1px solid var(--palace-gold);">ğŸŒ™ æ™šé¤</th></tr>';
            weekMeal.forEach((m,i) => {
                const bg = i%2===0 ? '#FFFDF8' : '#FDF8F0';
                html += '<tr style="background:'+bg+';"><td style="padding:10px;border:1px solid #e0d5c5;font-weight:600;color:var(--palace-red);">'+m.day+'</td><td style="padding:10px;border:1px solid #e0d5c5;">'+m.b+'</td><td style="padding:10px;border:1px solid #e0d5c5;">'+m.l+'</td><td style="padding:10px;border:1px solid #e0d5c5;">'+m.d+'</td></tr>';
            });
            html += '</table></div></div>';

            html += '<div class="advice-card"><h4>ğŸµ å…»ç”ŸèŒ¶æ¨è</h4><div class="meal-grid">';
            teas.forEach(t => {
                html += '<div class="meal-card" style="text-align:center;"><h5 style="color:var(--palace-red);">'+t.name+'</h5><p style="font-size:0.9em;color:#666;margin-top:8px;">'+t.desc+'</p></div>';
            });
            html += '</div><p style="margin-top:15px;font-size:0.85em;color:#888;">ğŸ’¡ å»ºè®®ï¼šæ¯æ—¥é€‰æ‹©1-2æ¬¾å…»ç”ŸèŒ¶ï¼Œä¸Šåˆæˆ–ä¸‹åˆé¥®ç”¨ï¼Œé¿å…ç©ºè…¹æˆ–ç¡å‰é¥®ç”¨ã€‚</p></div>';

            let exercises = new Set(), healthTips = new Set();
            mainTypes.forEach(([type]) => {
                constitutionInfo[type].exercise.forEach(e => exercises.add(e));
                constitutionInfo[type].health.forEach(h => healthTips.add(h));
            });

            html += '<div class="advice-card"><h4>ğŸƒ è¿åŠ¨ä¿å¥å»ºè®®</h4><ul class="advice-list">';
            html += '<li><div class="advice-icon">ğŸƒ</div><div><strong>æ¨èè¿åŠ¨ï¼š</strong>' + [...exercises].join('ã€') + '</div></li>';
            html += '<li><div class="advice-icon">â°</div><div><strong>æœ€ä½³æ—¶é—´ï¼š</strong>ä¸Šåˆ9-11ç‚¹æˆ–ä¸‹åˆ4-6ç‚¹</div></li>';
            html += '<li><div class="advice-icon">ğŸ’¡</div><div><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>è¿åŠ¨å‰çƒ­èº«ï¼Œè¿åŠ¨åæ‹‰ä¼¸</div></li>';
            html += '</ul></div>';

            html += '<div class="advice-card"><h4>ğŸ’Š å…»ç”Ÿè°ƒç†å»ºè®®</h4><ul class="advice-list">';
            [...healthTips].forEach(tip => { html += '<li><div class="advice-icon">âœ“</div><div>' + tip + '</div></li>'; });
            html += '</ul></div>';

            html += '<div class="advice-card" style="border-left-color:#f44336;"><h4 style="color:#c62828;">âš ï¸ æ¸©é¦¨æç¤º</h4><ul class="advice-list">';
            html += '<li><div class="advice-icon" style="background:#f44336;color:#fff;">!</div><div>æœ¬æŠ¥å‘Šä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—è¯Šæ–­</div></li>';
            html += '<li><div class="advice-icon" style="background:#f44336;color:#fff;">!</div><div>å¦‚æœ‰ä¸¥é‡ä¸é€‚ï¼Œè¯·åŠæ—¶å°±åŒ»</div></li>';
            html += '<li><div class="advice-icon" style="background:#f44336;color:#fff;">!</div><div>é¥®é£Ÿè°ƒç†éœ€è¦é•¿æœŸåšæŒï¼Œå¾ªåºæ¸è¿›</div></li>';
            html += '</ul></div>';

            document.getElementById('resultContent').innerHTML = html;
            nextStep(3);
        }

        function restartTest() {
            answers = {};
            currentStep = 1;
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('section1').classList.add('active');
            updateSteps(1);
            document.querySelectorAll('.score-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('.checkbox-item').forEach(item => {
                item.classList.remove('selected');
                item.querySelector('input').checked = false;
            });
            window.scrollTo(0, 0);
        }

        initQuestions();
    </script>
</body>
</html>
